
- command: 'toolkit:install-clean'
  configuration: []
  expectations:
    - contains: |
        [Simulator] Simulating ExecStack()
            ->stopOnFail()
            ->exec('./vendor/bin/run toolkit:build-dev')
            ->exec('./vendor/bin/run drupal:site-install')
            ->exec('./vendor/bin/run drupal:setup-test')

- command: 'toolkit:install-clone'
  configuration: []
  expectations:
    - contains: |
        [Simulator] Simulating ExecStack()
            ->stopOnFail()
            ->exec('./vendor/bin/run toolkit:install-clean')
            ->exec('./vendor/bin/run toolkit:install-dump')

# with dump and config.
- command: 'toolkit:install-ci'
  configuration:
    toolkit:
      clone:
        dumpfile: 'dump.sql'
        config_file: 'config.yml'
  expectations:
    - contains: |
        [Simulator] Simulating Exec('./vendor/bin/run toolkit:install-dump')
        [Simulator] Running ./vendor/bin/run toolkit:install-dump
        [Simulator] Simulating ExecStack()
            ->stopOnFail()
            ->exec('vendor/bin/drush --uri=build config:import -y')
            ->exec('vendor/bin/drush --uri=build cache:rebuild')

# with dump and without config.
- command: 'toolkit:install-ci'
  configuration:
    toolkit:
      clone:
        dumpfile: 'dump.sql'
        config_file: 'no-config.yml'
  expectations:
    - contains: |
        [Simulator] Simulating Exec('./vendor/bin/run toolkit:install-dump')
        [Simulator] Running ./vendor/bin/run toolkit:install-dump

# without dump and with config.
- command: 'toolkit:install-ci'
  configuration:
    toolkit:
      clone:
        dumpfile: 'no-dump.sql'
        config_file: 'config.yml'
  expectations:
    - contains: |
        [Simulator] Simulating Exec('./vendor/bin/run drupal:site-install --existing-config')
        [Simulator] Running ./vendor/bin/run drupal:site-install --existing-config

# without dump and without config.
- command: 'toolkit:install-ci'
  configuration:
    toolkit:
      clone:
        dumpfile: 'no-dump.sql'
        config_file: 'no-config.yml'
  expectations:
    - contains: |
        [Simulator] Simulating Exec('./vendor/bin/run drupal:site-install')
        [Simulator] Running ./vendor/bin/run drupal:site-install
